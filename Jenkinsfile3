pipeline {
    agent any 

    tools {
        maven 'maven-3.5.2' 
    }

    stages {
        stage('Checkout SCM') {
            steps {
                checkout scm 
            }
        }

        stage('Build and Analyze') {
            steps {
        
                dir('demo') {
                    sh 'chmod +x mvnw'
   

 
                    withSonarQubeEnv('tondaron93') {
                   
                        sh './mvnw sonar:sonar -Dsonar.projectKey=com.example:demo -Dsonar.host.url=url -Dsonar.token='
                    }
                }
            }
        }
    }

 
}